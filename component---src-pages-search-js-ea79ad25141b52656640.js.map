{"version":3,"file":"component---src-pages-search-js-ea79ad25141b52656640.js","mappings":"+NAKmD,IAAAA,EAAA,CAAAC,KAAA,UAAAC,OAAA,uBAAAC,EAAA,CAAAF,KAAA,SAAAC,OAAA,sHAAAE,EAAA,CAAAH,KAAA,SAAAC,OAAA,cAAAG,EAAA,CAAAJ,KAAA,UAAAC,OAAA,8DAEpC,SAASI,EAAUC,GAAY,IAAX,KAAEC,GAAMD,EACzC,MAAM,EAACE,EAAM,EAACC,IAAYC,EAAAA,EAAAA,UAAS,KAC7B,KAAEC,IAASC,EAAAA,EAAAA,KAEXC,EAAWN,EAAKO,kBAAkBC,MAClCC,EAAUR,EAAMS,OAClBJ,EAASK,OAAOC,IAAe,IAAd,KAAEC,GAAMD,EACvB,MAAME,EAAIb,EAAMc,cAChB,OACEF,EAAKG,YAAYC,MAAMF,cAAcG,SAASJ,KAC7CD,EAAKG,YAAYG,QAAU,IAAIJ,cAAcG,SAASJ,KACtDD,EAAKG,YAAYI,OAAS,IAAIL,cAAcG,SAASJ,IACtDD,EAAKQ,QAAQN,cAAcG,SAASJ,KAGxC,GAEJ,OACEQ,EAAAA,EAAAA,GAACC,EAAAA,EAAM,MACLD,EAAAA,EAAAA,GAAA,MACEE,IAAG3B,GAKJ,WAGDyB,EAAAA,EAAAA,GAAA,YACAA,EAAAA,EAAAA,GAAA,YACAA,EAAAA,EAAAA,GAAA,SACEG,KAAK,OACLC,YAAY,sCACZC,MAAO1B,EACP2B,SAAUC,GAAK3B,EAAS2B,EAAEC,OAAOH,OACjCH,KAAKA,EAAAA,EAAAA,IAAG,qDAIIpB,EAAO,iBAAmB,iBAAgB,eACtCA,EAAO,OAAS,QAAO,UAC5BA,EAAO,QAAU,QAAO,6BAIpCH,EAAMS,QAA6B,IAAnBD,EAAQsB,SACvBT,EAAAA,EAAAA,GAAA,KAAGE,IAAG5B,GAAqB,yBAAuBK,EAAM,MAEzDQ,EAAQuB,IAAIC,IAAA,IAAC,KAAEpB,GAAMoB,EAAA,OACpBX,EAAAA,EAAAA,GAAA,OAAKY,IAAKrB,EAAKsB,GAAIX,KAAKA,EAAAA,EAAAA,IAAG,kBAAkBY,EAAAA,EAAAA,GAAO,GAAE,UACpDd,EAAAA,EAAAA,GAACe,EAAAA,KAAI,CACHC,GAAIzB,EAAK0B,OAAOC,KAChBhB,IAAG7B,IAUH2B,EAAAA,EAAAA,GAAA,MAAIE,KAAKA,EAAAA,EAAAA,IAAG,kBAAkBY,EAAAA,EAAAA,GAAO,EAAI,GAAE,SACxCvB,EAAKG,YAAYC,SAGtBK,EAAAA,EAAAA,GAAA,KAAGE,IAAGhC,GAAgC,MAChCqB,EAAKG,YAAYG,OACpBN,EAAKG,YAAYI,MAAK,MAASP,EAAKG,YAAYI,MAAK,KAAKP,EAAKG,YAAYyB,WAAU,MAAW5B,EAAKG,YAAY0B,OAEpHpB,EAAAA,EAAAA,GAAA,SAAIT,EAAKQ,YAKnB,C","sources":["webpack://double-dealer/./src/pages/search.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { graphql, Link } from \"gatsby\";\nimport { css } from \"@emotion/react\";\nimport { rhythm } from \"../utils/typography\";\nimport Layout from \"../components/layout\";\nimport { useTheme } from \"../context/ThemeContext\";\n\nexport default function SearchPage({ data }) {\n  const [query, setQuery] = useState(\"\");\n  const { dark } = useTheme();\n\n  const allPosts = data.allMarkdownRemark.edges;\n  const results = query.trim()\n    ? allPosts.filter(({ node }) => {\n        const q = query.toLowerCase();\n        return (\n          node.frontmatter.title.toLowerCase().includes(q) ||\n          (node.frontmatter.writer || \"\").toLowerCase().includes(q) ||\n          (node.frontmatter.issue || \"\").toLowerCase().includes(q) ||\n          node.excerpt.toLowerCase().includes(q)\n        );\n      })\n    : [];\n\n  return (\n    <Layout>\n      <h1\n        css={css`\n          display: inline-block;\n          border-bottom: 1px solid;\n          color: inherit;\n        `}\n      >\n        Search\n      </h1>\n      <br />\n      <br />\n      <input\n        type=\"text\"\n        placeholder=\"Search articles, fiction, archives…\"\n        value={query}\n        onChange={e => setQuery(e.target.value)}\n        css={css`\n          width: 100%;\n          padding: 8px 12px;\n          font-size: 1rem;\n          border: ${dark ? \"1px solid #666\" : \"1px solid #ccc\"};\n          background: ${dark ? \"#111\" : \"white\"};\n          color: ${dark ? \"white\" : \"black\"};\n          margin-bottom: 24px;\n        `}\n      />\n      {query.trim() && results.length === 0 && (\n        <p css={css`color: grey;`}>No results found for \"{query}\".</p>\n      )}\n      {results.map(({ node }) => (\n        <div key={node.id} css={css`margin-bottom: ${rhythm(1)};`}>\n          <Link\n            to={node.fields.slug}\n            css={css`\n              text-decoration: none;\n              color: inherit;\n              &:hover {\n                text-decoration: underline;\n                color: inherit;\n                text-decoration-color: #0080c0;\n              }\n            `}\n          >\n            <h2 css={css`margin-bottom: ${rhythm(1 / 4)};`}>\n              {node.frontmatter.title}\n            </h2>\n          </Link>\n          <p css={css`color: grey; margin: 0;`}>\n            By {node.frontmatter.writer}\n            {node.frontmatter.issue ? ` — ${node.frontmatter.issue}, ${node.frontmatter.issue_date}` : ` — ${node.frontmatter.date}`}\n          </p>\n          <p>{node.excerpt}</p>\n        </div>\n      ))}\n    </Layout>\n  );\n}\n\nexport const query = graphql`\n  query {\n    allMarkdownRemark(\n      sort: { frontmatter: { date: DESC } }\n      limit: 1000\n    ) {\n      edges {\n        node {\n          id\n          excerpt(pruneLength: 200)\n          frontmatter {\n            date(formatString: \"MMMM DD, YYYY\")\n            title\n            writer\n            issue\n            issue_date\n          }\n          fields {\n            slug\n          }\n        }\n      }\n    }\n  }\n`;\n"],"names":["_ref","name","styles","_ref2","_ref3","_ref4","SearchPage","_ref5","data","query","setQuery","useState","dark","useTheme","allPosts","allMarkdownRemark","edges","results","trim","filter","_ref6","node","q","toLowerCase","frontmatter","title","includes","writer","issue","excerpt","___EmotionJSX","Layout","css","type","placeholder","value","onChange","e","target","length","map","_ref7","key","id","rhythm","Link","to","fields","slug","issue_date","date"],"sourceRoot":""}